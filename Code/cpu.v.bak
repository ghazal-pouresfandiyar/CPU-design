module ALU(
	input [7:0] AC,
	input [7:0] DR,
	input [2:0] selector,

	output reg [7:0] result,
	output E
	);

always @(*)
begin
	case(selector)
	3'b000: result = AC + DR; //add
	//eightbit_fulladder(result, zero, AC, DR, 0);
	3'b001: result = AC - DR; //sub
	//eightbit_fulladder(result, zero, AC, DR, 1);
	3'b010: result = AC ^ DR; //xor
	3'b011: result = AC + AC; //multiply by 2
	//eightbit_fulladder(result, zero, AC, AC, 0);
	3'b110: result = ~AC; //cmp
	default: result = 8'd0;
	endcase
end
endmodule

module adder(AC, DR, Result, E, mode);
	input[7:0] AC;
	input[7:0] DR;
	input mode; //0 if add, 1 if sub

	output reg[7:0] Result;
	output reg E;

	wire[7:0] AC;
	wire[7:0] DR;
	wire mode; //0 if add, 1 if sub

	always @(AC,DR) begin
    		if (mode == 0'b1)
        		{E, Result} = AC - DR;
    		else if (mode == 1'b0)
        		{E, Result} = AC + DR;
    	end
endmodule

module adder_test_bench;
	reg [7:0] a;
	reg [7:0] b;
	reg cin;
	
	wire [7:0] sum;
	wire cout;
	initial begin
		a = 0;
		b = 0;
		cin = 0;
		#100 a=8'b00110111; b=8'b00000101; cin=1'b0;
		#100 a=8'b00110000; b=8'b00000110; cin=1'b0;
		#100 a=8'b01011110; b=8'b00000100; cin=1'b0;
		#100 a=8'b01101110; b=8'b00000011; cin=1'b0;
		#100 a=8'b01101111; b=8'b00000111; cin=1'b0;
		#100 a=8'b01110000; b=8'b00001000; cin=1'b0;
		#100 a=8'b11111111; b=8'b00000000; cin=1'b1;
	end
endmodule
	